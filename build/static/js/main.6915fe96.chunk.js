(this["webpackJsonpcook-book"]=this["webpackJsonpcook-book"]||[]).push([[0],{105:function(t,e,n){t.exports={product_img:"Product_product_img__1Eqp-",product_description:"Product_product_description__3psHp"}},115:function(t,e,n){t.exports={nav:"App_nav__3zW-1"}},138:function(t,e,n){},147:function(t,e,n){},152:function(t,e,n){},157:function(t,e,n){},158:function(t,e,n){},159:function(t,e,n){},160:function(t,e,n){"use strict";n.r(e);var c=n(0),a=n.n(c),i=n(29),r=n.n(i),o=(n(138),n(12)),s=n(115),d=n.n(s),u=n(238),l=n(239),j=n(240),b=n(241),p=n(228),h=n(245),m=n(244),_=n(38),O=n(6),f=n(49),x=n.n(f),g=n(50),v=n(222),k=n(248),P=n(224),N=n(226),S=n(227),y=n(249),w=n(3),I=Object(v.a)((function(t){return Object(k.a)({drawer:Object(O.a)({},t.breakpoints.up("sm"),{width:240,flexShrink:0}),toolbar:t.mixins.toolbar})})),C=function(){var t=I();return Object(w.jsx)("div",{className:x.a.menu_container,children:Object(w.jsxs)("nav",{className:x.a.menu_group,children:[Object(w.jsx)("div",{className:"".concat(t.toolbar," ").concat(x.a.menu_toolbar),children:"Cook books"}),Object(w.jsx)(P.a,{}),Object(w.jsxs)(N.a,{className:x.a.menu_list,children:[Object(w.jsxs)(S.a,{className:x.a.menu_list_item,component:g.b,button:!0,to:"/products",children:[Object(w.jsx)(p.a,{className:x.a.menu_list_item_icon,children:"fastfood"}),Object(w.jsx)(y.a,{primary:"\u041f\u0440\u043e\u0434\u0443\u043a\u0442\u044b"})]},"\u041f\u0440\u043e\u0434\u0443\u043a\u0442\u044b"),Object(w.jsxs)(S.a,{className:x.a.menu_list_item,component:g.b,button:!0,to:"/dishes",children:[Object(w.jsx)(p.a,{className:x.a.menu_list_item_icon,children:"ramen_dining"}),Object(w.jsx)(y.a,{primary:"\u0411\u043b\u044e\u0434\u0430"})]},"\u0411\u043b\u044e\u0434\u0430"),Object(w.jsxs)(S.a,{className:x.a.menu_list_item,component:g.b,button:!0,to:"/recipes",children:[Object(w.jsx)(p.a,{className:x.a.menu_list_item_icon,children:"list"}),Object(w.jsx)(y.a,{primary:"\u0420\u0435\u0446\u0435\u043f\u0442\u044b"})]},"\u0420\u0435\u0446\u0435\u043f\u0442\u044b")]})]})})},D=n(23),B=(n(147),n(21)),E=n(42),U=n(82);U.a.initializeApp({apiKey:"AIzaSyDB3dwO2iuIiboCD_gcAECctaPmNLL75k8",authDomain:"cookbook-248b9.firebaseapp.com",databaseURL:"https://cookbook-248b9.firebaseio.com",projectId:"cookbook-248b9",storageBucket:"cookbook-248b9.appspot.com",messagingSenderId:"351867999892",appId:"1:351867999892:web:55d06f16665198e6aac681",measurementId:"G-FTH6SEQE7Q"});var T=U.a.firestore();function A(){return T.collection("products").orderBy("name").get().then((function(t){return t.docs.map((function(t){return Object(E.a)({id:t.id},t.data())}))})).catch((function(t){console.log("Error getting products: ",t)}))}function F(){return T.collection("dishes").orderBy("name").get().then((function(t){return t.docs.map((function(t){return Object(E.a)({id:t.id},t.data())}))})).catch((function(t){console.log("Error getting dishes: ",t)}))}function M(){var t=Object(c.useState)([]),e=Object(o.a)(t,2),n=e[0],a=e[1],i=Object(c.useState)([]),r=Object(o.a)(i,2),s=r[0],d=r[1],u=Object(c.useState)([]),l=Object(o.a)(u,2),j=l[0],b=l[1],p=Object(c.useState)([]),h=Object(o.a)(p,2),m=h[0],_=h[1],O=Object(c.useState)(),f=Object(o.a)(O,2),x=f[0],g=f[1];return Object(c.useEffect)((function(){A().then(a),F().then(d)}),[]),{data:{products:n,product:j,dishes:s,dish:m,dishProducts:x},actions:{getProducts:function(){return A().then(a)},getProductById:function(t){return function(t){return T.collection("products").doc(t).get().then((function(t){return t.data()})).catch((function(t){return console.log("Error getting a product by Id: ",t)}))}(t).then(b)},getDishes:function(){return F().then(d)},getDishById:function(t){return function(t){return T.collection("dishes").doc(t).get().then((function(t){return t.data()})).catch((function(t){console.log("Error getting dish by Id: ",t)}))}(t).then(_)},getProductDishById:function(t){return(e=t,T.collection("products").doc(e).get().then((function(t){return t.data()})).catch((function(t){return console.log("Error getting a product by Id: ",t)}))).then(g);var e},createProduct:function(t){return function(t){return T.collection("products").add(Object(E.a)({},t)).then((function(t){return t.get()})).then((function(t){return Object(E.a)({id:t.id},t.data())}))}(t).then((function(t){return a([].concat(Object(B.a)(n),[t]))}))},createDish:function(t){return function(t){var e=t.products_list.map((function(t){return U.a.firestore().doc(t)}));return T.collection("dishes").add(Object(E.a)(Object(E.a)({},t),{},{products_list:e})).then((function(t){return t.get()})).then((function(t){return Object(E.a)({id:t.id},t.data())}))}(t)}}}}n(152);var L=function(t){return Object(w.jsx)(S.a,{children:Object(w.jsx)(g.b,{to:"/product/"+t.data.id,children:Object(w.jsx)(y.a,{children:t.data.name})})})},q=n(236),R=n(102),G=n.n(R),J=n(117),z=n(44),H=n.n(z),K=n(237),Q=n(247),W=n(246),X=n(242),Y=n(251),Z=n(243),V=function(t){var e=M(),n=e.data.products,a=e.actions,i={},r=Object(c.useState)(""),s=Object(o.a)(r,2),d=s[0],u=s[1],l=Object(c.useState)(""),j=Object(o.a)(l,2),b=j[0],p=j[1],h=Object(c.useState)(""),m=Object(o.a)(h,2),_=m[0],O=m[1],f=Object(c.useState)(""),x=Object(o.a)(f,2),g=x[0],v=x[1],k=Object(c.useState)(""),P=Object(o.a)(k,2),N=P[0],S=P[1],y=Object(c.useState)(""),I=Object(o.a)(y,2),C=I[0],D=I[1],U=Object(c.useState)([]),T=Object(o.a)(U,2),A=T[0],F=T[1],L=Object(c.useState)(1),R=Object(o.a)(L,2),z=R[0],V=R[1],$="add_dish"===t.action?"\u0431\u043b\u044e\u0434\u0430":"\u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0430",tt=function(){var e=Object(J.a)(G.a.mark((function e(c){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),"add_dish"!==t.action){e.next=10;break}return i.name=g,i.description=N,i.urlPic=C,i.recipe_id="",i.type_dish="",i.products_list=A.map((function(t){return"/products/"+n[t.id].id})),e.next=10,a.createDish(i);case 10:if("add_product"!==t.action){e.next=16;break}return i.name=d,i.description=b,i.urlPic=_,e.next=16,a.createProduct(i);case 16:t.handleClick();case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),et=function(e){"add_dish"===t.action&&v(e.target.value),"add_product"===t.action&&u(e.target.value)},nt=function(e){"add_dish"===t.action&&S(e.target.value),"add_product"===t.action&&p(e.target.value)},ct=function(e){"add_dish"===t.action&&D(e.target.value),"add_product"===t.action&&O(e.target.value)},at=function(){return"add_dish"===t.action?Object(w.jsxs)(Y.a,{spacing:1,id:"stack_inputs",children:[Object(w.jsx)("h3",{className:H.a.title,children:"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0435 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u044b"}),Object(w.jsx)("div",{children:Object(B.a)(Array(z)).map((function(t,e){return Object(w.jsx)("div",{className:H.a.input_wrapper,children:Object(w.jsx)(X.a,{disablePortal:!0,sx:{flexGrow:10},options:n.map((function(t){return t.name})),id:"combo-box-demo",onChange:function(t){!function(t,e){var n=Object(B.a)(A),c=Object(E.a)({},n[e]);c.id=t.target.dataset.optionIndex,n[e]=c,F(n)}(t,e)},renderInput:function(t){return Object(w.jsx)(Z.a,Object(E.a)(Object(E.a)({},t),{},{label:"\u041f\u0440\u043e\u0434\u0443\u043a\u0442",required:!0}))}},e)})}))}),Object(w.jsxs)("div",{className:H.a.button_wrapper,children:[Object(w.jsx)(q.a,{variant:"outlined",className:H.a.button_item,onClick:function(){return V(z+1)},children:"\u0415\u0449\u0451 \u043f\u0440\u043e\u0434\u0443\u043a\u0442"}),z>1?Object(w.jsx)(q.a,{variant:"outlined",color:"error",className:H.a.button_item,onClick:function(){V(z-1),function(){var t=Object(B.a)(A);t.pop(),F(t)}()},children:"\xd7"}):null]})]}):null};return Object(w.jsx)("div",{children:t.toggle?Object(w.jsx)("div",{className:H.a.modal,children:Object(w.jsxs)("div",{className:H.a.modal_content,children:[Object(w.jsxs)("div",{className:H.a.modal_header,children:[Object(w.jsxs)("h2",{className:H.a.title,children:["\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 ",$]}),Object(w.jsx)("span",{className:H.a.close,onClick:t.handleClick,children:"\xd7"})]}),Object(w.jsxs)("form",{className:H.a.form,onSubmit:tt,children:[Object(w.jsxs)(K.a,{required:!0,children:[Object(w.jsx)(Q.a,{htmlFor:"component-outlined",children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"}),Object(w.jsx)(W.a,{id:"field_name",value:"add_dish"===t.action?g:d,label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",onChange:et})]}),Object(w.jsxs)(K.a,{required:!0,children:[Object(w.jsx)(Q.a,{htmlFor:"component-outlined",children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),Object(w.jsx)(W.a,{id:"field_desc",value:"add_dish"===t.action?N:b,label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",onChange:nt})]}),Object(w.jsxs)(K.a,{required:!0,children:[Object(w.jsx)(Q.a,{htmlFor:"component-outlined",children:"URL \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438"}),Object(w.jsx)(W.a,{id:"field_pic",value:"add_dish"===t.action?C:_,label:"URL \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438",onChange:ct})]}),"add_dish"===t.action?at():null,Object(w.jsx)(q.a,{type:"submit",variant:"contained",color:"primary",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]})]})}):null})},$=function(){var t=M(),e=t.data.products,n=t.actions,a=Object(c.useState)(!1),i=Object(o.a)(a,2),r=i[0],s=i[1];return Object(w.jsxs)("div",{children:[Object(w.jsx)(q.a,{variant:"outlined",startIcon:Object(w.jsx)(p.a,{children:"add"}),onClick:function(){s(!0)},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0440\u043e\u0434\u0443\u043a\u0442"}),Object(w.jsxs)(N.a,{children:[e.map((function(t){return Object(w.jsx)(L,{data:t},t.id)})),r?Object(w.jsx)(V,{action:"add_product",toggle:r,handleClick:function(){s(!1),n.getProducts()}}):null]})]})},tt=(n(157),n(158),function(t){return Object(w.jsx)(S.a,{children:Object(w.jsx)(g.b,{to:"/dish/"+t.data.id,children:Object(w.jsx)(y.a,{children:t.data.name})})})}),et=function(){var t=M(),e=t.data.dishes,n=t.actions,a=Object(c.useState)(!1),i=Object(o.a)(a,2),r=i[0],s=i[1];return Object(w.jsxs)("div",{children:[Object(w.jsx)(q.a,{variant:"outlined",startIcon:Object(w.jsx)(p.a,{children:"add"}),onClick:function(){s(!0)},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0431\u043b\u044e\u0434\u043e"}),Object(w.jsx)(N.a,{children:e.map((function(t){return Object(w.jsx)(tt,{data:t},t.id)}))}),r?Object(w.jsx)(V,{action:"add_dish",toggle:r,handleClick:function(){s(!1),n.getDishes()}}):null]})},nt=(n(159),function(){return Object(w.jsx)("div",{children:"Recipes page"})});var ct=240,at=Object(v.a)((function(t){return Object(k.a)({root:{display:"flex"},drawer:Object(O.a)({},t.breakpoints.up("sm"),{width:ct,flexShrink:0}),appBar:Object(O.a)({},t.breakpoints.up("sm"),{width:"calc(100% - ".concat(ct,"px)"),marginLeft:ct}),menuButton:Object(O.a)({marginRight:t.spacing(2)},t.breakpoints.up("sm"),{display:"none"}),toolbar:t.mixins.toolbar,drawerPaper:{width:ct},content:{flexGrow:1,padding:t.spacing(3)}})})),it=n(105),rt=n.n(it),ot=function(t){var e=t.match,n=M(),a=n.data.product,i=n.actions;Object(c.useEffect)((function(){i.getProductById(e.params.productId)}),[]);var r=a.urlPic?Object(w.jsx)("img",{src:a.urlPic,alt:"product`s picture",className:rt.a.product_img}):"";return Object(w.jsxs)("div",{children:[Object(w.jsx)("h3",{children:a.name}),r,Object(w.jsx)("div",{className:rt.a.product_description,children:a.description})]})},st=n(93),dt=n.n(st);function ut(t,e){return Promise.all(t[e].map((function(t){return t.get().then((function(t){return t.data()}))})))}function lt(t,e){return t[e].get().then((function(t){return t.data()}))}var jt=function(t){var e=t.match,n=M(),a=n.data,i=(a.dish,a.product,a.dishProducts,n.actions,Object(c.useState)()),r=Object(o.a)(i,2),s=(r[0],r[1],function(t,e){var n=Object(c.useState)(),a=Object(o.a)(n,2),i=a[0],r=a[1];return Object(c.useEffect)((function(){return t.onSnapshot((function(t){var n=t.data();e?(Array.isArray(n[e])?ut(n,e):lt(n,e)).then((function(t){n[e]=t,r(n)})):r(n)}))}),[]),[i]}(T.collection("dishes").doc(e.params.dishId),"products_list")),d=Object(o.a)(s,1)[0],u=d&&d.urlPic?Object(w.jsx)("img",{src:d.urlPic,alt:"dishes`s picture",className:dt.a.dish_img}):"";return Object(w.jsxs)("div",{children:[Object(w.jsx)("h3",{children:d&&d.name}),u,Object(w.jsxs)("div",{children:[Object(w.jsx)("h4",{children:"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0435 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u044b"}),Object(w.jsx)(N.a,{children:d&&d.products_list.map((function(t){return Object(w.jsxs)(S.a,{children:[Object(w.jsx)("img",{src:t.urlPic,alt:"products` picture",className:dt.a.products_list__img}),Object(w.jsx)("span",{className:dt.a.products_list__text,children:t.name})]},.333*Math.random())}))})]})]})},bt=function(t){var e=t.window,n=at(),a=Object(_.a)(),i=Object(c.useState)(!1),r=Object(o.a)(i,2),s=r[0],O=r[1],f=function(){O(!s)},x=void 0!==e?function(){return e().document.body}:void 0,g=function(){var t,e,n=Object(c.useState)("light"),a=Object(o.a)(n,2),i=a[0],r=a[1];(null===(t=localStorage)||void 0===t?void 0:t.getItem("Theme"))||(localStorage.setItem("Theme","light"),r("light"));var s=null===(e=localStorage)||void 0===e?void 0:e.getItem("Theme");return Object(c.useEffect)((function(){r(s)}),[s]),{currentTheme:s,changeTheme:function(){"light"===i?(r("dark"),localStorage.setItem("Theme","dark")):(r("light"),localStorage.setItem("Theme","light"))}}}();g.currentTheme,g.changeTheme;return Object(w.jsxs)("div",{className:n.root,children:[Object(w.jsx)(u.a,{}),Object(w.jsx)(l.a,{position:"fixed",className:n.appBar,children:Object(w.jsx)(j.a,{children:Object(w.jsx)(b.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:f,className:n.menuButton,children:Object(w.jsx)(p.a,{children:"menu"})})})}),Object(w.jsxs)("nav",{className:"".concat(n.drawer," ").concat(d.a.nav),children:[Object(w.jsx)(h.a,{smUp:!0,implementation:"css",children:Object(w.jsx)(m.a,{container:x,variant:"temporary",anchor:"rt1"===a.direction?"right":"left",open:s,onClose:f,classes:{paper:n.drawerPaper},ModalProps:{keepMounted:!0},children:Object(w.jsx)(C,{})})}),Object(w.jsx)(h.a,{xsDown:!0,implementation:"css",children:Object(w.jsx)(m.a,{classes:{paper:n.drawerPaper},variant:"permanent",open:!0,children:Object(w.jsx)(C,{})})})]}),Object(w.jsxs)("main",{className:n.content,children:[Object(w.jsx)("div",{className:n.toolbar}),Object(w.jsxs)(D.c,{children:[Object(w.jsx)(D.a,{path:"/products",component:$}),Object(w.jsx)(D.a,{path:"/product/:productId",component:ot}),Object(w.jsx)(D.a,{path:"/dishes",component:et}),Object(w.jsx)(D.a,{path:"/dish/:dishId",component:jt}),Object(w.jsx)(D.a,{path:"/recipes",component:nt})]})]})]})},pt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,254)).then((function(e){var n=e.getCLS,c=e.getFID,a=e.getFCP,i=e.getLCP,r=e.getTTFB;n(t),c(t),a(t),i(t),r(t)}))};r.a.render(Object(w.jsx)(a.a.StrictMode,{children:Object(w.jsx)(g.a,{children:Object(w.jsx)(bt,{})})}),document.getElementById("root")),pt()},44:function(t,e,n){t.exports={modal:"PopUp_modal__3rPgp",modal_content:"PopUp_modal_content__3yfD5",close:"PopUp_close__2qXdl",modal_header:"PopUp_modal_header__2yb10",title:"PopUp_title__2g163",form:"PopUp_form__1Kx9F",input_wrapper:"PopUp_input_wrapper__S1CTA",input_del:"PopUp_input_del__zn5GB",button_wrapper:"PopUp_button_wrapper__AnYaN",button_item:"PopUp_button_item__2NnNH"}},49:function(t,e,n){t.exports={menu_container:"Menu_menu_container__3JDnZ",menu_group:"Menu_menu_group__1yh8W",menu_list:"Menu_menu_list__1EDpk",menu_list_item:"Menu_menu_list_item__1jGiR",menu_list_item_icon:"Menu_menu_list_item_icon__1u92m",menu_toolbar:"Menu_menu_toolbar__3_Jgr"}},93:function(t,e,n){t.exports={dish_img:"Dish_dish_img__3lBm6",dish_description:"Dish_dish_description__2JFtq",products_list__img:"Dish_products_list__img__34N2A",products_list__text:"Dish_products_list__text__KjtfP"}}},[[160,1,2]]]);
//# sourceMappingURL=main.6915fe96.chunk.js.map